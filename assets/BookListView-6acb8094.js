import{d as E,c as u,r as f,o as I,a as d,b as i,e as t,w as c,v as _,u as e,f as p,F as R,g as T,h as Y,t as m,p as $,i as A,_ as O,j as x,k as D,l as j,m as M}from"./index-95eaa7dc.js";import{u as q,O as a}from"./book-store-7dd1083f.js";import{u as G}from"./author-store-95d5949b.js";import{T as z,g as H}from"./TableFooter-384f49e5.js";const r=h=>($("data-v-5d476fd7"),h=h(),A(),h),J={class:"table table-striped align-middle text-center"},K=r(()=>t("tr",{class:"title"},[t("th",{style:{width:"20%"}},"Author"),t("th",{style:{width:"5%"}}),t("th",null,"Title"),t("th",{style:{width:"15%"}},"Year"),t("th",{style:{width:"15%"}},"Category"),t("th",{style:{width:"15%"}},"Price"),t("th")],-1)),Q={class:"filter"},W=r(()=>t("th",null,null,-1)),X=r(()=>t("th",null,null,-1)),Z=["disabled"],tt={class:"input-group"},et=["disabled"],st=r(()=>t("span",{class:"input-group-text"},"-",-1)),ot=["disabled"],lt=["disabled"],nt={class:"input-group"},at=["disabled"],dt=r(()=>t("span",{class:"input-group-text"},"-",-1)),it=["disabled"],rt=r(()=>t("th",null,null,-1)),ut={key:0},ct=r(()=>t("tr",null,[t("td",{colspan:"10"},"Loading...")],-1)),_t=[ct],pt={key:1},ht=r(()=>t("tr",null,[t("td",{colspan:"10"},"Something went wrong... Please come back later!")],-1)),mt=[ht],St={key:2},gt=r(()=>t("tr",null,[t("td",{colspan:"10"},"No books found... Please add one!")],-1)),vt=[gt],yt={key:3},ft=r(()=>t("tr",null,[t("td",{colspan:"10"},"No books matching your filter... Please weaken your requirements!")],-1)),bt=[ft],Ct={key:4},kt=["src","alt","title"],Bt={class:"text-start"},Ut={class:"text-end"},xt=["onClick"],Et=E({__name:"BookList",setup(h){const{getBooks:S,fetchBooks:b,getFetchStatus:g,removeBook:w}=q(),{getAuthor:P}=G(),n=u(g),o=f({}),V=u(()=>Object.values(o.value).some(Boolean)),C=u(S),v=u(()=>S(o.value)),F=u(()=>H(v.value,y.value,k.value)),L=u(()=>C.value.length===0),N=u(()=>v.value.length===0),y=f(1),k=f(5);return I(b),(Ft,l)=>(d(),i("table",J,[t("thead",null,[K,t("tr",Q,[W,X,t("th",null,[c(t("input",{class:"form-control","onUpdate:modelValue":l[0]||(l[0]=s=>o.value.title=s),disabled:e(n)!==e(a).SUCCESS},null,8,Z),[[_,o.value.title]])]),t("th",null,[t("div",tt,[c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=s=>o.value.minYear=s),disabled:e(n)!==e(a).SUCCESS},null,8,et),[[_,o.value.minYear]]),st,c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=s=>o.value.maxYear=s),disabled:e(n)!==e(a).SUCCESS},null,8,ot),[[_,o.value.maxYear]])])]),t("th",null,[c(t("input",{class:"form-control","onUpdate:modelValue":l[3]||(l[3]=s=>o.value.category=s),disabled:e(n)!==e(a).SUCCESS},null,8,lt),[[_,o.value.category]])]),t("th",null,[t("div",nt,[c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[4]||(l[4]=s=>o.value.minPrice=s),disabled:e(n)!==e(a).SUCCESS},null,8,at),[[_,o.value.minPrice]]),dt,c(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=s=>o.value.maxPrice=s),disabled:e(n)!==e(a).SUCCESS},null,8,it),[[_,o.value.maxPrice]])])]),rt])]),e(n)===e(a).PENDING?(d(),i("tbody",ut,_t)):p("",!0),e(n)===e(a).ERROR?(d(),i("tbody",pt,mt)):p("",!0),e(n)===e(a).SUCCESS&&e(L)?(d(),i("tbody",St,vt)):e(n)===e(a).SUCCESS&&e(N)?(d(),i("tbody",yt,bt)):p("",!0),e(n)===e(a).SUCCESS?(d(),i("tbody",Ct,[(d(!0),i(R,null,T(e(F),s=>{var B,U;return d(),i("tr",{key:s.id},[t("td",null,m(((B=e(P)(s.authorId))==null?void 0:B.name)??"-"),1),t("td",null,[s.posterUrl?(d(),i("img",{key:0,src:s.posterUrl,alt:s.title,title:s.title,height:"50"},null,8,kt)):p("",!0)]),t("td",Bt,m(s.title),1),t("td",null,m(s.year??"-"),1),t("td",null,m(s.category??"-"),1),t("td",Ut,m(s.price?`${(U=s.price)==null?void 0:U.toFixed(2)} ₽`:"-"),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:Lt=>e(w)(s)}," × ",8,xt)])])}),128))])):p("",!0),e(n)===e(a).SUCCESS?(d(),Y(z,{key:5,page:y.value,"onUpdate:page":l[6]||(l[6]=s=>y.value=s),isFiltered:e(V),total:e(C).length,filtered:e(v).length,perPage:k.value},null,8,["page","isFiltered","total","filtered","perPage"])):p("",!0)]))}});const wt=O(Et,[["__scopeId","data-v-5d476fd7"]]),Pt=t("h1",null,"Books",-1),Vt={class:"mb-3"},Yt=E({__name:"BookListView",setup(h){return(S,b)=>{const g=j("RouterLink");return d(),i("div",null,[Pt,t("div",Vt,[x(g,{to:"/books/add",class:"btn btn-primary"},{default:D(()=>[M(" Add Book ")]),_:1})]),x(wt)])}}});export{Yt as default};
