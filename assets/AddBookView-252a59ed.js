import{d as _,c as g,r as U,s as V,o as B,a as u,b as c,e as o,f as w,w as l,v as r,z as x,F as A,g as S,u as P,x as C,A as D,t as F,j as M,B as R}from"./index-95eaa7dc.js";import{n as E}from"./index.browser-7e542916.js";import{u as v}from"./book-store-7dd1083f.js";import{u as I}from"./author-store-95d5949b.js";const L=m=>new Promise((d,n)=>{const a=new FileReader;a.readAsDataURL(m),a.onload=()=>{d(a.result)},a.onerror=i=>{n(i)}}),N=["onSubmit"],T={class:"mb-3"},j=o("label",{for:"book-poster-url",class:"form-label"}," Poster ",-1),O=["src","alt","title"],$=o("label",{for:"book-poster-file",class:"btn btn-primary mt-3"}," Upload Poster ",-1),q={class:"mb-3"},z=o("label",{for:"book-title",class:"form-label"}," Title ",-1),G={class:"mb-3"},H=o("label",{for:"book-author",class:"form-label"}," Author ",-1),Y=o("option",{disabled:""},"-- select one --",-1),J=["value"],K={class:"row mb-3"},Q={class:"col"},W=o("label",{for:"book-isbn",class:"form-label"}," ISBN ",-1),X={class:"col"},Z=o("label",{for:"book-year",class:"form-label"}," Published Year ",-1),oo={class:"mb-3"},eo=o("label",{for:"book-description",class:"form-label"}," Description ",-1),to={class:"mb-3"},so=o("label",{for:"book-tags",class:"form-label"}," Tags ",-1),lo={class:"row mb-3"},ao={class:"col"},ro=o("label",{for:"book-category",class:"form-label"}," Category ",-1),no={class:"col"},io=o("label",{for:"book-price",class:"form-label"}," Price ",-1),uo=o("div",{class:"mb-3"},[o("button",{type:"submit",class:"btn btn-primary"}," Add ")],-1),co=_({__name:"BookForm",props:{modelValue:null},emits:["undefined"],setup(m,{emit:d}){const n=m,{fetchBooks:a}=v(),{getAuthors:i}=I(),b="https://via.placeholder.com/200x300",k=g(i),e=U({});V(n,()=>{e.value={},Object.assign(e,n.modelValue)});const h=async f=>{const{files:t}=f.target;if(!t)return;const[p]=t;e.value.posterUrl=await L(p)},y=()=>{e.value.id=E(),d("update:model-value",{...e.value})};return B(a),(f,t)=>{const p=D("focus");return u(),c("form",{class:"BookForm",onSubmit:C(y,["prevent"])},[o("div",T,[j,e.value.posterUrl?(u(),c("img",{key:0,class:"d-flex mb-3",src:e.value.posterUrl,alt:e.value.posterUrl,title:e.value.posterUrl,height:"200"},null,8,O)):w("",!0),l(o("input",{type:"text",id:"book-poster-url",class:"form-control",placeholder:b,"onUpdate:modelValue":t[0]||(t[0]=s=>e.value.posterUrl=s)},null,512),[[r,e.value.posterUrl]]),$,o("input",{type:"file",id:"book-poster-file",class:"visually-hidden",onChange:h},null,32)]),o("div",q,[z,l(o("input",{type:"text",id:"book-title",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=s=>e.value.title=s)},null,512),[[p],[r,e.value.title]])]),o("div",G,[H,l(o("select",{id:"book-author",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=s=>e.value.authorId=s)},[Y,(u(!0),c(A,null,S(P(k),s=>(u(),c("option",{key:s.id,value:s.id},F(s.name),9,J))),128))],512),[[x,e.value.authorId]])]),o("div",K,[o("div",Q,[W,l(o("input",{type:"number",id:"book-isbn",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=s=>e.value.isbn=s)},null,512),[[r,e.value.isbn]])]),o("div",X,[Z,l(o("input",{type:"number",id:"book-year",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>e.value.year=s)},null,512),[[r,e.value.year]])])]),o("div",oo,[eo,l(o("textarea",{id:"book-description",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=s=>e.value.description=s)},null,512),[[r,e.value.description]])]),o("div",to,[so,l(o("input",{type:"text",id:"book-tags",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=s=>e.value.tags=s)},null,512),[[r,e.value.tags]])]),o("div",lo,[o("div",ao,[ro,l(o("input",{type:"text",id:"book-category",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=s=>e.value.category=s)},null,512),[[r,e.value.category]])]),o("div",no,[io,l(o("input",{type:"number",id:"book-price",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=s=>e.value.price=s)},null,512),[[r,e.value.price]])])]),uo],40,N)}}}),mo=o("h1",null,"Add Book",-1),vo=_({__name:"AddBookView",setup(m){const d=R(),{addBook:n}=v(),a=async i=>{await n(i),await d.push({name:"books"})};return(i,b)=>(u(),c("div",null,[mo,M(co,{"onUpdate:modelValue":a})]))}});export{vo as default};
