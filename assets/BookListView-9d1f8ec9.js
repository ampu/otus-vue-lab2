import{d as B,c as r,r as y,o as L,a as i,b as d,e as t,w as u,v as c,u as e,f as _,F as R,g as T,h as Y,t as p,i as U,j as $,k as A,l as O}from"./index-47bfd8d1.js";import{u as D,O as a}from"./book-store-746e31ca.js";import{u as I}from"./author-store-1fa404e3.js";import{T as j,g as M}from"./TableFooter-3a1a03f6.js";const q={class:"table table-striped align-middle text-center"},G=t("tr",{class:"title"},[t("th",{style:{width:"20%"}},"Author"),t("th",{style:{width:"5%"}}),t("th",null,"Title"),t("th",{style:{width:"15%"}},"Year"),t("th",{style:{width:"15%"}},"Category"),t("th",{style:{width:"15%"}},"Price"),t("th")],-1),z={class:"filter"},H=t("th",null,null,-1),J=t("th",null,null,-1),K=["disabled"],Q={class:"input-group"},W=["disabled"],X=t("span",{class:"input-group-text"},"-",-1),Z=["disabled"],tt=["disabled"],et={class:"input-group"},st=["disabled"],ot=t("span",{class:"input-group-text"},"-",-1),lt=["disabled"],nt=t("th",null,null,-1),at={key:0},it=t("tr",null,[t("td",{colspan:"10"},"Loading...")],-1),dt=[it],rt={key:1},ut=t("tr",null,[t("td",{colspan:"10"},"Something went wrong... Please come back later!")],-1),ct=[ut],_t={key:2},pt=t("tr",null,[t("td",{colspan:"10"},"No books found... Please add one!")],-1),ht=[pt],mt={key:3},gt=t("tr",null,[t("td",{colspan:"10"},"No books matching your filter... Please weaken your requirements!")],-1),St=[gt],yt={key:4},vt=["src","alt","title"],ft={class:"text-start"},bt={class:"text-end"},Ct=["onClick"],kt=B({__name:"BookList",setup(x){const{getBooks:h,fetchBooks:v,getFetchStatus:m,removeBook:E}=D(),{getAuthor:P}=I(),n=r(m),o=y({}),w=r(()=>Object.values(o.value).some(Boolean)),f=r(h),g=r(()=>h(o.value)),V=r(()=>M(g.value,S.value,b.value)),F=r(()=>f.value.length===0),N=r(()=>g.value.length===0),S=y(1),b=y(5);return L(v),(xt,l)=>(i(),d("table",q,[t("thead",null,[G,t("tr",z,[H,J,t("th",null,[u(t("input",{class:"form-control","onUpdate:modelValue":l[0]||(l[0]=s=>o.value.title=s),disabled:e(n)!==e(a).SUCCESS},null,8,K),[[c,o.value.title]])]),t("th",null,[t("div",Q,[u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=s=>o.value.minYear=s),disabled:e(n)!==e(a).SUCCESS},null,8,W),[[c,o.value.minYear]]),X,u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=s=>o.value.maxYear=s),disabled:e(n)!==e(a).SUCCESS},null,8,Z),[[c,o.value.maxYear]])])]),t("th",null,[u(t("input",{class:"form-control","onUpdate:modelValue":l[3]||(l[3]=s=>o.value.category=s),disabled:e(n)!==e(a).SUCCESS},null,8,tt),[[c,o.value.category]])]),t("th",null,[t("div",et,[u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[4]||(l[4]=s=>o.value.minPrice=s),disabled:e(n)!==e(a).SUCCESS},null,8,st),[[c,o.value.minPrice]]),ot,u(t("input",{type:"number",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=s=>o.value.maxPrice=s),disabled:e(n)!==e(a).SUCCESS},null,8,lt),[[c,o.value.maxPrice]])])]),nt])]),e(n)===e(a).PENDING?(i(),d("tbody",at,dt)):_("",!0),e(n)===e(a).ERROR?(i(),d("tbody",rt,ct)):_("",!0),e(n)===e(a).SUCCESS&&e(F)?(i(),d("tbody",_t,ht)):e(n)===e(a).SUCCESS&&e(N)?(i(),d("tbody",mt,St)):_("",!0),e(n)===e(a).SUCCESS?(i(),d("tbody",yt,[(i(!0),d(R,null,T(e(V),s=>{var C,k;return i(),d("tr",{key:s.id},[t("td",null,p(((C=e(P)(s.authorId))==null?void 0:C.name)??"-"),1),t("td",null,[s.posterUrl?(i(),d("img",{key:0,src:s.posterUrl,alt:s.title,title:s.title,height:"50"},null,8,vt)):_("",!0)]),t("td",ft,p(s.title),1),t("td",null,p(s.year??"-"),1),t("td",null,p(s.category??"-"),1),t("td",bt,p(s.price?`${(k=s.price)==null?void 0:k.toFixed(2)} ₽`:"-"),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:Et=>e(E)(s)}," × ",8,Ct)])])}),128))])):_("",!0),e(n)===e(a).SUCCESS?(i(),Y(j,{key:5,page:S.value,"onUpdate:page":l[6]||(l[6]=s=>S.value=s),isFiltered:e(w),total:e(f).length,filtered:e(g).length,perPage:b.value},null,8,["page","isFiltered","total","filtered","perPage"])):_("",!0)]))}}),Ut=t("h1",null,"Books",-1),Bt={class:"mb-3"},Nt=B({__name:"BookListView",setup(x){return(h,v)=>{const m=A("RouterLink");return i(),d("div",null,[Ut,t("div",Bt,[U(m,{to:"/books/add",class:"btn btn-primary"},{default:$(()=>[O(" Add Book ")]),_:1})]),U(kt)])}}});export{Nt as default};
