import{d as S,D as B,c as u,y as _,b as E,h as n,q as F,u as c,e as b,a as V,n as w,k as C,l as g}from"./index-d6ea6542.js";import{b as x,E as N,d as v}from"./navigation-helpers-82fb862e.js";import{B as y}from"./BookForm-b895dcef.js";import{u as d,O as I}from"./book-store-8c0cc4d1.js";import{F as T}from"./flash-types-2fb8710c.js";import"./lodash-d94b49bb.js";import"./add-9aeefab5.js";const U=b("h1",null,"Edit Book",-1),A=S({__name:"EditBookView",props:{bookId:null},setup(i){const m=i,o=C(),a=g(),{getBook:l,getFetchStatus:p}=d(),{addFlash:k}=B(),t=u(()=>l(m.bookId)),s=u(p),{updateBook:f}=d();_([t,s],()=>{!t.value&&s.value===I.SUCCESS&&v(o,a)},{immediate:!0});const h=async r=>{await f(r),k({status:T.SUCCESS,message:"Book edited"});const e=a.query.redirect;if(!e){await o.push({name:"books"});return}await x(o,e)};return(r,e)=>(V(),E("div",null,[U,n(y,{modelValue:c(t),"onUpdate:modelValue":h},{default:F(()=>[n(c(N)),w(" Edit ")]),_:1},8,["modelValue"])]))}});export{A as default};
